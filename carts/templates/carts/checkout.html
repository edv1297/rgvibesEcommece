{% extends 'base.html'%}

{% block body %}
{{ object.order_id }} -- {{ object.cart }}

{% if not billing_profile %}
  <!-- Login -->
  <!-- Continue as guest -->
<div class="row">
  <div class="col-12 col-md-6">
    <p class = "lead"> Login or Register</p>
      {% include 'accounts/snippets/form.html' with form=login_form next_url=request.build_absolute_uri %}
  </div>
  <div class="col-12 col-md-6">
    <p class = "lead"> Continue as Guest</p>

    {% url "guest_register" as guest_register_url %}
    {% include 'accounts/snippets/form.html' with form=guest_form next_url=request.build_absolute_uri action_url=guest_register_url %}
  </div>
</div>

{% else %}

  {% if not obj.shipping_address %}
  <div class="row">
    <div class="col-md-6 mx-auto col-10">
      <p class = 'lead'>Shipping address:</p>
      <hr/>
    {% url "guest_register" as guest_register_url %}
    {% include 'addresses/snippets/form.html' with form=address_form next_url=request.build_absolute_uri action_url=guest_register_url address_type='shipping' %}
  </div>
</div>

  {% else %}
      <h1>Checkout</h1>
      <p>Cart total: ${{object.cart.total}}</p>
      <p>Shipping total: ${{object.shipping_total}}</p>
      <p>Total: ${{object.total}}</p>
  {% endif %}
{% endif %}
{% endblock %}
